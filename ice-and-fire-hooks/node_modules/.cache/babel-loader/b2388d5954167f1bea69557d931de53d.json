{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport IceandfireApi from \"../services/iceandfire\";\nimport useLoadingError from \"./loading-error\";\n\nconst useCharters = _ref => {\n  _s();\n\n  let {\n    initPage,\n    initPageSize\n  } = _ref;\n  const {\n    character,\n    loading,\n    setLoading,\n    error,\n    tryCatch\n  } = useLoadingError();\n  const [filter, setFilter] = useState({\n    page: initPage,\n    pageSize: initPageSize\n  });\n\n  const getCharcters = async () => {\n    const value = initPage && initPageSize ? filter : undefined;\n    setLoading(true);\n    const res = await IceandfireApi.getCharacters(value === null || value === void 0 ? void 0 : value.page, value === null || value === void 0 ? void 0 : value.pageSize);\n    tryCatch(res);\n  };\n\n  const handlerPage = type => _e => {\n    if (!initPage && !initPageSize) return;\n\n    if (type === \"left\" && filter !== null && filter !== void 0 && filter.page && (filter === null || filter === void 0 ? void 0 : filter.page) > 1) {\n      setFilter({ ...filter,\n        page: (filter === null || filter === void 0 ? void 0 : filter.page) - 1\n      });\n    } else if (filter !== null && filter !== void 0 && filter.page) setFilter({ ...filter,\n      page: (filter === null || filter === void 0 ? void 0 : filter.page) + 1\n    });\n  };\n\n  useEffect(() => {\n    getCharcters();\n  }, [filter.page]);\n  return {\n    loading,\n    error,\n    character,\n    filter,\n    handlerPage\n  };\n};\n\n_s(useCharters, \"N1+jTSgJL4o1qt4V+EZDmgDxPII=\", false, function () {\n  return [useLoadingError];\n});\n\nexport { useCharters };","map":{"version":3,"names":["useEffect","useState","IceandfireApi","useLoadingError","useCharters","initPage","initPageSize","character","loading","setLoading","error","tryCatch","filter","setFilter","page","pageSize","getCharcters","value","undefined","res","getCharacters","handlerPage","type","_e"],"sources":["C:/Users/Виктория/Desktop/Женя Work/ice-and-fire-hooks/src/characters/charters.hooks.tsx"],"sourcesContent":["import React, {FC, useEffect, useState} from \"react\";\nimport IceandfireApi from \"../services/iceandfire\";\nimport useLoadingError from \"./loading-error\";\nimport { Character } from \"../types/type\";\n\ntype TFilter = {\n    page?: number;\n    pageSize?: number;\n  }\n\nconst useCharters = ({initPage, initPageSize}: {initPage?: number, initPageSize?: number}) => {\n    const {character, loading, setLoading, error, tryCatch} = useLoadingError();\n    \n    const [filter, setFilter] = useState<TFilter>({\n        page: initPage,\n        pageSize: initPageSize,\n    })\n\n\n    const getCharcters = async () => {\n        const value = initPage && initPageSize ? filter : undefined\n        setLoading(true)\n        const res = await IceandfireApi.getCharacters(value?.page, value?.pageSize)\n        tryCatch(res)\n    }\n\n    const handlerPage = (type: \"left\" | \"right\") => (_e: any) => {\n        if (!initPage && !initPageSize) return;\n        if (type === \"left\" && filter?.page && filter?.page > 1) {\n          setFilter({ ...filter, page: filter?.page - 1 });\n        } else if (filter?.page) setFilter({ ...filter, page: filter?.page + 1 });\n      };\n\n    useEffect(() => {\n        getCharcters()\n    }, [filter.page])\n\n    return {loading, error, character, filter, handlerPage}\n}\nexport {useCharters};"],"mappings":";;AAAA,SAAmBA,SAAnB,EAA8BC,QAA9B,QAA6C,OAA7C;AACA,OAAOC,aAAP,MAA0B,wBAA1B;AACA,OAAOC,eAAP,MAA4B,iBAA5B;;AAQA,MAAMC,WAAW,GAAG,QAA0E;EAAA;;EAAA,IAAzE;IAACC,QAAD;IAAWC;EAAX,CAAyE;EAC1F,MAAM;IAACC,SAAD;IAAYC,OAAZ;IAAqBC,UAArB;IAAiCC,KAAjC;IAAwCC;EAAxC,IAAoDR,eAAe,EAAzE;EAEA,MAAM,CAACS,MAAD,EAASC,SAAT,IAAsBZ,QAAQ,CAAU;IAC1Ca,IAAI,EAAET,QADoC;IAE1CU,QAAQ,EAAET;EAFgC,CAAV,CAApC;;EAMA,MAAMU,YAAY,GAAG,YAAY;IAC7B,MAAMC,KAAK,GAAGZ,QAAQ,IAAIC,YAAZ,GAA2BM,MAA3B,GAAoCM,SAAlD;IACAT,UAAU,CAAC,IAAD,CAAV;IACA,MAAMU,GAAG,GAAG,MAAMjB,aAAa,CAACkB,aAAd,CAA4BH,KAA5B,aAA4BA,KAA5B,uBAA4BA,KAAK,CAAEH,IAAnC,EAAyCG,KAAzC,aAAyCA,KAAzC,uBAAyCA,KAAK,CAAEF,QAAhD,CAAlB;IACAJ,QAAQ,CAACQ,GAAD,CAAR;EACH,CALD;;EAOA,MAAME,WAAW,GAAIC,IAAD,IAA6BC,EAAD,IAAa;IACzD,IAAI,CAAClB,QAAD,IAAa,CAACC,YAAlB,EAAgC;;IAChC,IAAIgB,IAAI,KAAK,MAAT,IAAmBV,MAAnB,aAAmBA,MAAnB,eAAmBA,MAAM,CAAEE,IAA3B,IAAmC,CAAAF,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEE,IAAR,IAAe,CAAtD,EAAyD;MACvDD,SAAS,CAAC,EAAE,GAAGD,MAAL;QAAaE,IAAI,EAAE,CAAAF,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEE,IAAR,IAAe;MAAlC,CAAD,CAAT;IACD,CAFD,MAEO,IAAIF,MAAJ,aAAIA,MAAJ,eAAIA,MAAM,CAAEE,IAAZ,EAAkBD,SAAS,CAAC,EAAE,GAAGD,MAAL;MAAaE,IAAI,EAAE,CAAAF,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEE,IAAR,IAAe;IAAlC,CAAD,CAAT;EAC1B,CALH;;EAOAd,SAAS,CAAC,MAAM;IACZgB,YAAY;EACf,CAFQ,EAEN,CAACJ,MAAM,CAACE,IAAR,CAFM,CAAT;EAIA,OAAO;IAACN,OAAD;IAAUE,KAAV;IAAiBH,SAAjB;IAA4BK,MAA5B;IAAoCS;EAApC,CAAP;AACH,CA5BD;;GAAMjB,W;UACwDD,e;;;AA4B9D,SAAQC,WAAR"},"metadata":{},"sourceType":"module"}