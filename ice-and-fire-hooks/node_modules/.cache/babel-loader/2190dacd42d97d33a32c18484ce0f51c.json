{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport IceandfireApi from \"../services/iceandfire\";\n\nconst useCharters = _ref => {\n  _s();\n\n  let {\n    initPage,\n    initPageSize\n  } = _ref;\n  const {\n    character,\n    loading,\n    error,\n    tryCatch\n  } = useLoadingError();\n  const [filter, setFilter] = useState({\n    page: initPage,\n    pageSize: initPageSize\n  });\n\n  const getCharcters = async () => {\n    const value = initPage && initPageSize ? filter : undefined;\n    setLoading(true);\n    const res = await IceandfireApi.getCharacters(value === null || value === void 0 ? void 0 : value.page, value === null || value === void 0 ? void 0 : value.pageSize);\n    tryCatch(res);\n  };\n\n  const handlerPage = type => _e => {\n    if (!initPage && !initPageSize) return;\n\n    if (type === \"left\" && filter !== null && filter !== void 0 && filter.page && (filter === null || filter === void 0 ? void 0 : filter.page) > 1) {\n      setFilter({ ...filter,\n        page: (filter === null || filter === void 0 ? void 0 : filter.page) - 1\n      });\n    } else if (filter !== null && filter !== void 0 && filter.page) setFilter({ ...filter,\n      page: (filter === null || filter === void 0 ? void 0 : filter.page) + 1\n    });\n  };\n\n  useEffect(() => {\n    getCharcters();\n  }, [filter.page]);\n  return {\n    loading,\n    error,\n    characters,\n    filter,\n    handlerPage\n  };\n};\n\n_s(useCharters, \"YxIZue5ZxjccC09huGNWgSBkbEQ=\", true);\n\nexport { useCharters };","map":{"version":3,"names":["useEffect","useState","IceandfireApi","useCharters","initPage","initPageSize","character","loading","error","tryCatch","useLoadingError","filter","setFilter","page","pageSize","getCharcters","value","undefined","setLoading","res","getCharacters","handlerPage","type","_e","characters"],"sources":["C:/Users/Виктория/Desktop/Женя Work/ice-and-fire-hooks/src/characters/charters.hooks.tsx"],"sourcesContent":["import React, {FC, useEffect, useState} from \"react\";\nimport IceandfireApi from \"../services/iceandfire\";\nimport { Character } from \"../types/type\";\n\ntype TFilter = {\n    page?: number;\n    pageSize?: number;\n  }\n\nconst useCharters = ({initPage, initPageSize}: {initPage?: number, initPageSize?: number}) => {\n    const {character, loading, error, tryCatch} = useLoadingError();\n    \n    const [filter, setFilter] = useState<TFilter>({\n        page: initPage,\n        pageSize: initPageSize,\n    })\n\n    \n\n    const getCharcters = async () => {\n        const value = initPage && initPageSize ? filter : undefined\n        setLoading(true)\n        const res = await IceandfireApi.getCharacters(value?.page, value?.pageSize)\n        tryCatch(res)\n    }\n\n    const handlerPage = (type: \"left\" | \"right\") => (_e: any) => {\n        if (!initPage && !initPageSize) return;\n        if (type === \"left\" && filter?.page && filter?.page > 1) {\n          setFilter({ ...filter, page: filter?.page - 1 });\n        } else if (filter?.page) setFilter({ ...filter, page: filter?.page + 1 });\n      };\n\n    useEffect(() => {\n        getCharcters()\n    }, [filter.page])\n\n    return {loading, error, characters, filter, handlerPage}\n}\nexport {useCharters};"],"mappings":";;AAAA,SAAmBA,SAAnB,EAA8BC,QAA9B,QAA6C,OAA7C;AACA,OAAOC,aAAP,MAA0B,wBAA1B;;AAQA,MAAMC,WAAW,GAAG,QAA0E;EAAA;;EAAA,IAAzE;IAACC,QAAD;IAAWC;EAAX,CAAyE;EAC1F,MAAM;IAACC,SAAD;IAAYC,OAAZ;IAAqBC,KAArB;IAA4BC;EAA5B,IAAwCC,eAAe,EAA7D;EAEA,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBX,QAAQ,CAAU;IAC1CY,IAAI,EAAET,QADoC;IAE1CU,QAAQ,EAAET;EAFgC,CAAV,CAApC;;EAOA,MAAMU,YAAY,GAAG,YAAY;IAC7B,MAAMC,KAAK,GAAGZ,QAAQ,IAAIC,YAAZ,GAA2BM,MAA3B,GAAoCM,SAAlD;IACAC,UAAU,CAAC,IAAD,CAAV;IACA,MAAMC,GAAG,GAAG,MAAMjB,aAAa,CAACkB,aAAd,CAA4BJ,KAA5B,aAA4BA,KAA5B,uBAA4BA,KAAK,CAAEH,IAAnC,EAAyCG,KAAzC,aAAyCA,KAAzC,uBAAyCA,KAAK,CAAEF,QAAhD,CAAlB;IACAL,QAAQ,CAACU,GAAD,CAAR;EACH,CALD;;EAOA,MAAME,WAAW,GAAIC,IAAD,IAA6BC,EAAD,IAAa;IACzD,IAAI,CAACnB,QAAD,IAAa,CAACC,YAAlB,EAAgC;;IAChC,IAAIiB,IAAI,KAAK,MAAT,IAAmBX,MAAnB,aAAmBA,MAAnB,eAAmBA,MAAM,CAAEE,IAA3B,IAAmC,CAAAF,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEE,IAAR,IAAe,CAAtD,EAAyD;MACvDD,SAAS,CAAC,EAAE,GAAGD,MAAL;QAAaE,IAAI,EAAE,CAAAF,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEE,IAAR,IAAe;MAAlC,CAAD,CAAT;IACD,CAFD,MAEO,IAAIF,MAAJ,aAAIA,MAAJ,eAAIA,MAAM,CAAEE,IAAZ,EAAkBD,SAAS,CAAC,EAAE,GAAGD,MAAL;MAAaE,IAAI,EAAE,CAAAF,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEE,IAAR,IAAe;IAAlC,CAAD,CAAT;EAC1B,CALH;;EAOAb,SAAS,CAAC,MAAM;IACZe,YAAY;EACf,CAFQ,EAEN,CAACJ,MAAM,CAACE,IAAR,CAFM,CAAT;EAIA,OAAO;IAACN,OAAD;IAAUC,KAAV;IAAiBgB,UAAjB;IAA6Bb,MAA7B;IAAqCU;EAArC,CAAP;AACH,CA7BD;;GAAMlB,W;;AA8BN,SAAQA,WAAR"},"metadata":{},"sourceType":"module"}