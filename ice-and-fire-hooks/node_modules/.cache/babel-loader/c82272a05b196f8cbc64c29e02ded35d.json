{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport IceandfireApi from \"../services/iceandfire\";\nimport useLoadingandError from \"./use-loading\";\n\nconst useCharters = _ref => {\n  _s();\n\n  let {\n    initPage,\n    initPageSize\n  } = _ref;\n  const {\n    value: characters,\n    loading,\n    error,\n    handlerClickCharacter\n  } = useLoadingandError(() => {\n    var _value, _value2;\n\n    IceandfireApi.getCharacters((_value = value) === null || _value === void 0 ? void 0 : _value.page, (_value2 = value) === null || _value2 === void 0 ? void 0 : _value2.pageSize);\n  });\n  const [filter, setFilter] = useState({\n    page: initPage,\n    pageSize: initPageSize\n  });\n\n  const getCharcters = async () => {\n    const value = initPage && initPageSize ? filter : undefined;\n    setLoading(true);\n\n    try {\n      const res = await setCharacters(res);\n    } catch (e) {\n      setError(true);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlerPage = type => _e => {\n    if (!initPage && !initPageSize) return;\n\n    if (type === \"left\" && filter !== null && filter !== void 0 && filter.page && (filter === null || filter === void 0 ? void 0 : filter.page) > 1) {\n      setFilter({ ...filter,\n        page: (filter === null || filter === void 0 ? void 0 : filter.page) - 1\n      });\n    } else if (filter !== null && filter !== void 0 && filter.page) setFilter({ ...filter,\n      page: (filter === null || filter === void 0 ? void 0 : filter.page) + 1\n    });\n  };\n\n  useEffect(() => {\n    getCharcters();\n  }, [filter.page]);\n  return {\n    loading,\n    error,\n    characters,\n    filter,\n    handlerPage\n  };\n};\n\n_s(useCharters, \"fEfQjxnm98uEd1h0uiPMikrHuxY=\", false, function () {\n  return [useLoadingandError];\n});\n\nexport { useCharters };","map":{"version":3,"names":["useEffect","useState","IceandfireApi","useLoadingandError","useCharters","initPage","initPageSize","value","characters","loading","error","handlerClickCharacter","getCharacters","page","pageSize","filter","setFilter","getCharcters","undefined","setLoading","res","setCharacters","e","setError","handlerPage","type","_e"],"sources":["C:/Users/Виктория/Desktop/Женя Work/ice-and-fire-hooks/src/characters/charters.hooks.tsx"],"sourcesContent":["import React, {FC, useEffect, useState} from \"react\";\nimport IceandfireApi from \"../services/iceandfire\";\nimport { Character } from \"../types/type\";\nimport useLoadingandError from \"./use-loading\";\n\ntype TFilter = {\n    page?: number;\n    pageSize?: number;\n  }\n\nconst useCharters = ({initPage, initPageSize}: {initPage?: number, initPageSize?: number}) => {\n\n    const {value: characters, loading, error, handlerClickCharacter} = useLoadingandError(()=> {IceandfireApi.getCharacters(value?.page, value?.pageSize)});\n    \n    const [filter, setFilter] = useState<TFilter>({\n        page: initPage,\n        pageSize: initPageSize,\n    })\n\n    \n\n    const getCharcters = async () => {\n        const value = initPage && initPageSize ? filter : undefined\n        setLoading(true)\n        try {\n          const res = await \n          setCharacters(res)\n        } catch (e: any) {\n          setError(true)\n        } finally {\n          setLoading(false)\n        }\n    }\n\n\n\n    const handlerPage = (type: \"left\" | \"right\") => (_e: any) => {\n        if (!initPage && !initPageSize) return;\n        if (type === \"left\" && filter?.page && filter?.page > 1) {\n          setFilter({ ...filter, page: filter?.page - 1 });\n        } else if (filter?.page) setFilter({ ...filter, page: filter?.page + 1 });\n      };\n\n    useEffect(() => {\n        getCharcters()\n    }, [filter.page])\n\n    return {loading, error, characters, filter, handlerPage}\n}\nexport {useCharters};"],"mappings":";;AAAA,SAAmBA,SAAnB,EAA8BC,QAA9B,QAA6C,OAA7C;AACA,OAAOC,aAAP,MAA0B,wBAA1B;AAEA,OAAOC,kBAAP,MAA+B,eAA/B;;AAOA,MAAMC,WAAW,GAAG,QAA0E;EAAA;;EAAA,IAAzE;IAACC,QAAD;IAAWC;EAAX,CAAyE;EAE1F,MAAM;IAACC,KAAK,EAAEC,UAAR;IAAoBC,OAApB;IAA6BC,KAA7B;IAAoCC;EAApC,IAA6DR,kBAAkB,CAAC,MAAK;IAAA;;IAACD,aAAa,CAACU,aAAd,WAA4BL,KAA5B,2CAA4B,OAAOM,IAAnC,aAAyCN,KAAzC,4CAAyC,QAAOO,QAAhD;EAA0D,CAAjE,CAArF;EAEA,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBf,QAAQ,CAAU;IAC1CY,IAAI,EAAER,QADoC;IAE1CS,QAAQ,EAAER;EAFgC,CAAV,CAApC;;EAOA,MAAMW,YAAY,GAAG,YAAY;IAC7B,MAAMV,KAAK,GAAGF,QAAQ,IAAIC,YAAZ,GAA2BS,MAA3B,GAAoCG,SAAlD;IACAC,UAAU,CAAC,IAAD,CAAV;;IACA,IAAI;MACF,MAAMC,GAAG,GAAG,MACZC,aAAa,CAACD,GAAD,CADb;IAED,CAHD,CAGE,OAAOE,CAAP,EAAe;MACfC,QAAQ,CAAC,IAAD,CAAR;IACD,CALD,SAKU;MACRJ,UAAU,CAAC,KAAD,CAAV;IACD;EACJ,CAXD;;EAeA,MAAMK,WAAW,GAAIC,IAAD,IAA6BC,EAAD,IAAa;IACzD,IAAI,CAACrB,QAAD,IAAa,CAACC,YAAlB,EAAgC;;IAChC,IAAImB,IAAI,KAAK,MAAT,IAAmBV,MAAnB,aAAmBA,MAAnB,eAAmBA,MAAM,CAAEF,IAA3B,IAAmC,CAAAE,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEF,IAAR,IAAe,CAAtD,EAAyD;MACvDG,SAAS,CAAC,EAAE,GAAGD,MAAL;QAAaF,IAAI,EAAE,CAAAE,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEF,IAAR,IAAe;MAAlC,CAAD,CAAT;IACD,CAFD,MAEO,IAAIE,MAAJ,aAAIA,MAAJ,eAAIA,MAAM,CAAEF,IAAZ,EAAkBG,SAAS,CAAC,EAAE,GAAGD,MAAL;MAAaF,IAAI,EAAE,CAAAE,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEF,IAAR,IAAe;IAAlC,CAAD,CAAT;EAC1B,CALH;;EAOAb,SAAS,CAAC,MAAM;IACZiB,YAAY;EACf,CAFQ,EAEN,CAACF,MAAM,CAACF,IAAR,CAFM,CAAT;EAIA,OAAO;IAACJ,OAAD;IAAUC,KAAV;IAAiBF,UAAjB;IAA6BO,MAA7B;IAAqCS;EAArC,CAAP;AACH,CAtCD;;GAAMpB,W;UAEiED,kB;;;AAqCvE,SAAQC,WAAR"},"metadata":{},"sourceType":"module"}