{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport IceandfireApi from \"../services/iceandfire\";\n\nconst useCharters = _ref => {\n  _s();\n\n  let {\n    initPage,\n    initPageSize\n  } = _ref;\n  const [characters, setCharacters] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [filter, setFilter] = useState({\n    page: initPage,\n    pageSize: initPageSize\n  });\n\n  const getCharcters = async () => {\n    const value = initPage && initPageSize ? filter : undefined;\n    setLoading(true);\n\n    try {\n      const res = await IceandfireApi.getCharacters(value === null || value === void 0 ? void 0 : value.page, value === null || value === void 0 ? void 0 : value.pageSize);\n      setCharacters(res);\n    } catch (e) {\n      setError(true);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlerPage = type => _e => {\n    if (!initPage && !initPageSize) return;\n\n    if (type === \"left\" && filter !== null && filter !== void 0 && filter.page && (filter === null || filter === void 0 ? void 0 : filter.page) > 1) {\n      setFilter({ ...filter,\n        page: (filter === null || filter === void 0 ? void 0 : filter.page) - 1\n      });\n    } else if (filter !== null && filter !== void 0 && filter.page) setFilter({ ...filter,\n      page: (filter === null || filter === void 0 ? void 0 : filter.page) + 1\n    });\n  };\n\n  useEffect(() => {\n    getCharcters();\n  }, [filter.page]);\n  return {\n    loading,\n    error,\n    characters,\n    filter,\n    handlerPage\n  };\n};\n\n_s(useCharters, \"Hs/xXQDUTBXAXB8yQK2EjbHUJGw=\");\n\nexport { useCharters };","map":{"version":3,"names":["useEffect","useState","IceandfireApi","useCharters","initPage","initPageSize","characters","setCharacters","loading","setLoading","error","setError","filter","setFilter","page","pageSize","getCharcters","value","undefined","res","getCharacters","e","handlerPage","type","_e"],"sources":["C:/Users/Виктория/Desktop/Женя Work/ice-and-fire-hooks/src/characters/charters.hooks.tsx"],"sourcesContent":["import React, {FC, useEffect, useState} from \"react\";\nimport IceandfireApi from \"../services/iceandfire\";\nimport { Character } from \"../types/type\";\n\ntype TFilter = {\n    page?: number;\n    pageSize?: number;\n  }\n\nconst useCharters = ({initPage, initPageSize}: {initPage?: number, initPageSize?: number}) => {\n    const [characters, setCharacters] = useState<null | Character[]>(null)\n    const [loading, setLoading] = useState<boolean>(false)\n    const [error, setError] = useState<boolean>(false)\n    const [filter, setFilter] = useState<TFilter>({\n        page: initPage,\n        pageSize: initPageSize,\n    })\n\n    const getCharcters = async () => {\n        const value = initPage && initPageSize ? filter : undefined\n        setLoading(true)\n        try {\n          const res = await IceandfireApi.getCharacters(value?.page, value?.pageSize)\n          setCharacters(res)\n        } catch (e: any) {\n          setError(true)\n        } finally {\n          setLoading(false)\n        }\n    }\n    const handlerPage = (type: \"left\" | \"right\") => (_e: any) => {\n        if (!initPage && !initPageSize) return;\n        if (type === \"left\" && filter?.page && filter?.page > 1) {\n          setFilter({ ...filter, page: filter?.page - 1 });\n        } else if (filter?.page) setFilter({ ...filter, page: filter?.page + 1 });\n      };\n\n    useEffect(() => {\n        getCharcters()\n    }, [filter.page])\n\n    return {loading, error, characters, filter, handlerPage}\n}\nexport {useCharters};"],"mappings":";;AAAA,SAAmBA,SAAnB,EAA8BC,QAA9B,QAA6C,OAA7C;AACA,OAAOC,aAAP,MAA0B,wBAA1B;;AAQA,MAAMC,WAAW,GAAG,QAA0E;EAAA;;EAAA,IAAzE;IAACC,QAAD;IAAWC;EAAX,CAAyE;EAC1F,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BN,QAAQ,CAAqB,IAArB,CAA5C;EACA,MAAM,CAACO,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAU,KAAV,CAAtC;EACA,MAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAU,KAAV,CAAlC;EACA,MAAM,CAACW,MAAD,EAASC,SAAT,IAAsBZ,QAAQ,CAAU;IAC1Ca,IAAI,EAAEV,QADoC;IAE1CW,QAAQ,EAAEV;EAFgC,CAAV,CAApC;;EAKA,MAAMW,YAAY,GAAG,YAAY;IAC7B,MAAMC,KAAK,GAAGb,QAAQ,IAAIC,YAAZ,GAA2BO,MAA3B,GAAoCM,SAAlD;IACAT,UAAU,CAAC,IAAD,CAAV;;IACA,IAAI;MACF,MAAMU,GAAG,GAAG,MAAMjB,aAAa,CAACkB,aAAd,CAA4BH,KAA5B,aAA4BA,KAA5B,uBAA4BA,KAAK,CAAEH,IAAnC,EAAyCG,KAAzC,aAAyCA,KAAzC,uBAAyCA,KAAK,CAAEF,QAAhD,CAAlB;MACAR,aAAa,CAACY,GAAD,CAAb;IACD,CAHD,CAGE,OAAOE,CAAP,EAAe;MACfV,QAAQ,CAAC,IAAD,CAAR;IACD,CALD,SAKU;MACRF,UAAU,CAAC,KAAD,CAAV;IACD;EACJ,CAXD;;EAYA,MAAMa,WAAW,GAAIC,IAAD,IAA6BC,EAAD,IAAa;IACzD,IAAI,CAACpB,QAAD,IAAa,CAACC,YAAlB,EAAgC;;IAChC,IAAIkB,IAAI,KAAK,MAAT,IAAmBX,MAAnB,aAAmBA,MAAnB,eAAmBA,MAAM,CAAEE,IAA3B,IAAmC,CAAAF,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEE,IAAR,IAAe,CAAtD,EAAyD;MACvDD,SAAS,CAAC,EAAE,GAAGD,MAAL;QAAaE,IAAI,EAAE,CAAAF,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEE,IAAR,IAAe;MAAlC,CAAD,CAAT;IACD,CAFD,MAEO,IAAIF,MAAJ,aAAIA,MAAJ,eAAIA,MAAM,CAAEE,IAAZ,EAAkBD,SAAS,CAAC,EAAE,GAAGD,MAAL;MAAaE,IAAI,EAAE,CAAAF,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEE,IAAR,IAAe;IAAlC,CAAD,CAAT;EAC1B,CALH;;EAOAd,SAAS,CAAC,MAAM;IACZgB,YAAY;EACf,CAFQ,EAEN,CAACJ,MAAM,CAACE,IAAR,CAFM,CAAT;EAIA,OAAO;IAACN,OAAD;IAAUE,KAAV;IAAiBJ,UAAjB;IAA6BM,MAA7B;IAAqCU;EAArC,CAAP;AACH,CAjCD;;GAAMnB,W;;AAkCN,SAAQA,WAAR"},"metadata":{},"sourceType":"module"}